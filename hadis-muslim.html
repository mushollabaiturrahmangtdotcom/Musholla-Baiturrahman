<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shahih Muslim â€” Musholla Baiturrahman</title>
<link rel="icon" type="image/png" href="images/logo.png">
<link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Tajawal:wght@300;400;500;700&family=Crimson+Pro:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
<style>
:root {
  --deep:   #0e2a40;
  --mid:    #154f74;
  --bright: #1a7aaa;
  --light:  #2196c8;
  --gold:   #c9a84c;
  --goldl:  #e8c97a;
  --cream:  #f8f4ec;
  --creamd: #eae4d6;
  --white:  #ffffff;
  --ink:    #1c1c1c;
  --inkm:   #444;
  --inkl:   #788;
  --ok:     #16a34a;
  --sb-w:   280px;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Crimson Pro',Georgia,serif;background:var(--cream);color:var(--ink);height:100vh;display:flex;flex-direction:column;overflow:hidden;}

/* NAV */
nav{position:fixed;top:0;left:0;right:0;z-index:200;height:60px;background:var(--deep);border-bottom:2px solid var(--gold);display:flex;align-items:center;justify-content:space-between;padding:0 1.5rem;flex-shrink:0;}
.nav-brand{display:flex;align-items:center;gap:10px;text-decoration:none;}
.nav-brand img{height:34px;}
.nav-brand span{font-size:.82rem;font-weight:600;color:#fff;font-family:'Tajawal',sans-serif;}
.nav-back{font-family:'Tajawal',sans-serif;font-size:.78rem;font-weight:500;color:rgba(255,255,255,.75);text-decoration:none;padding:5px 13px;border-radius:6px;border:1px solid rgba(255,255,255,.2);transition:all .2s;}
.nav-back:hover{background:rgba(255,255,255,.1);color:var(--goldl);}

/* LAYOUT */
.layout{display:flex;height:calc(100vh - 60px);margin-top:60px;}

/* SIDEBAR */
.sidebar{width:var(--sb-w);flex-shrink:0;display:flex;flex-direction:column;background:var(--deep);border-right:1px solid rgba(201,168,76,.25);overflow:hidden;}
.sb-head{padding:18px 16px 14px;border-bottom:1px solid rgba(255,255,255,.07);flex-shrink:0;}
.sb-title-ar{font-family:'Amiri',serif;font-size:1.6rem;color:var(--goldl);direction:rtl;text-align:right;line-height:1.2;margin-bottom:2px;}
.sb-title-id{font-family:'Tajawal',sans-serif;font-size:.72rem;font-weight:500;color:rgba(255,255,255,.5);letter-spacing:.06em;text-transform:uppercase;margin-bottom:12px;}
.sb-stats{display:flex;gap:8px;margin-bottom:12px;}
.sb-stat{flex:1;background:rgba(201,168,76,.12);border:1px solid rgba(201,168,76,.2);border-radius:8px;padding:6px 8px;text-align:center;}
.sb-stat-n{font-family:'Tajawal',sans-serif;font-size:1rem;font-weight:700;color:var(--goldl);line-height:1;}
.sb-stat-l{font-family:'Tajawal',sans-serif;font-size:.58rem;color:rgba(255,255,255,.4);margin-top:2px;text-transform:uppercase;letter-spacing:.05em;}
.sb-search{position:relative;}
.sb-search input{width:100%;padding:8px 12px 8px 34px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);border-radius:8px;color:#fff;font-family:'Tajawal',sans-serif;font-size:.82rem;outline:none;transition:all .2s;}
.sb-search input::placeholder{color:rgba(255,255,255,.35);}
.sb-search input:focus{background:rgba(255,255,255,.13);border-color:rgba(201,168,76,.4);}
.sb-search-icon{position:absolute;left:10px;top:50%;transform:translateY(-50%);font-size:.8rem;pointer-events:none;}
.sb-list{flex:1;overflow-y:auto;padding:6px;}
.sb-list::-webkit-scrollbar{width:3px;}
.sb-list::-webkit-scrollbar-thumb{background:rgba(255,255,255,.1);border-radius:2px;}
.kitab-btn{display:flex;align-items:center;gap:9px;width:100%;padding:8px 9px;border-radius:8px;border:none;background:transparent;cursor:pointer;text-align:left;transition:background .15s;color:rgba(255,255,255,.7);}
.kitab-btn:hover{background:rgba(255,255,255,.07);color:#fff;}
.kitab-btn.active{background:linear-gradient(90deg,rgba(201,168,76,.2),rgba(201,168,76,.08));border-left:3px solid var(--gold);padding-left:6px;color:var(--goldl);}
.kitab-btn.active .kb-num{background:rgba(201,168,76,.25);color:var(--goldl);}
.kb-num{width:28px;height:28px;flex-shrink:0;background:rgba(255,255,255,.07);border-radius:6px;display:grid;place-items:center;font-family:'Tajawal',sans-serif;font-size:.65rem;font-weight:700;color:rgba(255,255,255,.4);}
.kb-text{flex:1;min-width:0;}
.kb-name{font-family:'Tajawal',sans-serif;font-size:.79rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.3;}
.kb-count{font-family:'Tajawal',sans-serif;font-size:.62rem;color:rgba(255,255,255,.3);margin-top:1px;}
.kitab-btn.active .kb-count{color:rgba(201,168,76,.6);}

/* MAIN */
.main{flex:1;display:flex;flex-direction:column;overflow:hidden;background:var(--cream);}
.main-head{display:flex;align-items:center;justify-content:space-between;padding:14px 22px;background:var(--white);border-bottom:2px solid var(--creamd);flex-shrink:0;gap:12px;flex-wrap:wrap;}
.mh-left h2{font-family:'Amiri',serif;font-size:1.3rem;color:var(--deep);line-height:1.2;}
.mh-left p{font-family:'Tajawal',sans-serif;font-size:.68rem;color:var(--inkl);margin-top:2px;}
.mh-right{display:flex;align-items:center;gap:8px;flex-shrink:0;}
.nav-arrow{width:32px;height:32px;border-radius:8px;border:1.5px solid var(--creamd);background:var(--white);font-size:.85rem;cursor:pointer;display:grid;place-items:center;transition:all .15s;color:var(--inkm);}
.nav-arrow:hover:not(:disabled){background:var(--deep);color:#fff;border-color:var(--deep);}
.nav-arrow:disabled{opacity:.3;cursor:not-allowed;}
.page-counter{font-family:'Tajawal',sans-serif;font-size:.78rem;color:var(--inkl);white-space:nowrap;padding:4px 10px;background:var(--cream);border-radius:6px;border:1px solid var(--creamd);}
.info-bar{display:flex;align-items:center;gap:16px;padding:8px 22px;background:rgba(14,42,64,.04);border-bottom:1px solid var(--creamd);flex-shrink:0;flex-wrap:wrap;}
.ib-item{display:flex;align-items:center;gap:5px;font-family:'Tajawal',sans-serif;font-size:.7rem;color:var(--inkl);}
.ib-item strong{color:var(--bright);font-weight:600;}

/* HADIS LIST */
.hadis-scroll{flex:1;overflow-y:auto;padding:16px 20px 8px;}
.hadis-scroll::-webkit-scrollbar{width:5px;}
.hadis-scroll::-webkit-scrollbar-thumb{background:var(--creamd);border-radius:3px;}
.hadis-card{background:var(--white);border-radius:14px;margin-bottom:14px;border:1px solid var(--creamd);overflow:hidden;transition:box-shadow .2s,transform .2s;}
.hadis-card:hover{box-shadow:0 6px 24px rgba(14,42,64,.08);transform:translateY(-1px);}
.hc-top{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:linear-gradient(90deg,rgba(14,42,64,.03),transparent);border-bottom:1px solid var(--creamd);}
.hc-badge{display:flex;align-items:center;gap:8px;}
.hc-num{width:34px;height:34px;background:linear-gradient(135deg,var(--deep),var(--mid));border-radius:9px;display:grid;place-items:center;font-family:'Tajawal',sans-serif;font-size:.7rem;font-weight:700;color:var(--goldl);}
.hc-meta{font-family:'Tajawal',sans-serif;font-size:.7rem;color:var(--inkl);line-height:1.5;}
.hc-meta b{color:var(--bright);font-weight:600;}
.hc-actions{display:flex;gap:6px;}
.hc-action{width:28px;height:28px;border-radius:7px;border:1px solid var(--creamd);background:var(--white);cursor:pointer;display:grid;place-items:center;font-size:.78rem;transition:all .15s;color:var(--inkl);}
.hc-action:hover{border-color:var(--bright);color:var(--bright);}
.hc-action.copied{border-color:var(--ok);color:var(--ok);background:rgba(22,163,74,.06);}
.hc-arab{font-family:'Amiri',serif;font-size:1.5rem;line-height:2.3;direction:rtl;text-align:right;color:var(--ink);padding:18px 20px 14px;background:linear-gradient(160deg,rgba(201,168,76,.04) 0%,transparent 60%);border-bottom:1px solid var(--creamd);position:relative;}
.hc-arab::before{content:'';position:absolute;right:0;top:0;bottom:0;width:4px;background:linear-gradient(180deg,var(--gold),var(--goldl));border-radius:0 0 0 4px;}
.hc-sep{display:flex;align-items:center;gap:10px;padding:0 16px;}
.hc-sep-line{flex:1;height:1px;background:var(--creamd);}
.hc-sep-label{font-family:'Tajawal',sans-serif;font-size:.6rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--inkl);padding:4px 0;}
.hc-terjemah{font-family:'Crimson Pro',serif;font-size:1rem;line-height:1.85;color:var(--inkm);padding:12px 20px 16px;border-left:3px solid var(--light);margin:8px 16px 12px;border-radius:0 8px 8px 0;background:rgba(26,122,170,.04);}
.hc-perawi{padding:0 16px 12px;font-family:'Tajawal',sans-serif;font-size:.68rem;color:var(--inkl);display:flex;align-items:center;gap:5px;}

/* PAGINATION */
.pagination{display:flex;align-items:center;justify-content:center;gap:5px;padding:10px 20px;border-top:1px solid var(--creamd);background:var(--white);flex-shrink:0;flex-wrap:wrap;}
.pg-btn{min-width:34px;height:34px;padding:0 8px;border-radius:8px;border:1.5px solid var(--creamd);background:var(--white);font-family:'Tajawal',sans-serif;font-size:.8rem;font-weight:600;color:var(--deep);cursor:pointer;transition:all .18s;display:grid;place-items:center;}
.pg-btn:hover:not(:disabled):not(.dots){background:var(--deep);color:var(--goldl);border-color:var(--deep);}
.pg-btn.active{background:var(--deep);color:var(--goldl);border-color:var(--deep);}
.pg-btn:disabled{opacity:.3;cursor:not-allowed;}
.pg-btn.dots{border-color:transparent;background:transparent;cursor:default;}

/* STATES */
.state-view{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 24px;text-align:center;gap:16px;}
.state-icon{font-size:3.2rem;opacity:.35;}
.state-title{font-family:'Amiri',serif;font-size:1.6rem;color:var(--deep);}
.state-body{font-family:'Tajawal',sans-serif;font-size:.85rem;color:var(--inkl);line-height:1.75;max-width:380px;}
.state-ar{font-family:'Amiri',serif;font-size:1.8rem;color:var(--gold);direction:rtl;}
.spinner{width:42px;height:42px;border:3px solid var(--creamd);border-top-color:var(--bright);border-radius:50%;animation:spin .8s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}
.err-box{background:#fff5f5;border:1px solid #fecaca;border-radius:12px;padding:20px 24px;max-width:420px;width:100%;}
.err-box p{font-family:'Tajawal',sans-serif;font-size:.83rem;color:#c0392b;line-height:1.7;}
.err-box code{display:block;margin-top:6px;font-size:.72rem;color:#888;background:#f5f5f5;padding:4px 8px;border-radius:4px;}
.btn-retry{margin-top:12px;padding:8px 22px;border-radius:8px;background:var(--deep);color:#fff;font-family:'Tajawal',sans-serif;font-size:.82rem;font-weight:600;border:none;cursor:pointer;transition:background .15s;}
.btn-retry:hover{background:var(--mid);}
.api-notice{background:rgba(201,168,76,.08);border:1px solid rgba(201,168,76,.25);border-radius:10px;padding:12px 16px;font-family:'Tajawal',sans-serif;font-size:.75rem;color:var(--inkm);line-height:1.65;max-width:480px;text-align:left;}

@media(max-width:860px){:root{--sb-w:240px;}.hadis-scroll{padding:12px;}}
@media(max-width:620px){
  nav .nav-brand span{display:none;}
  .layout{flex-direction:column;}
  .sidebar{width:100%;height:180px;border-right:none;border-bottom:1px solid rgba(201,168,76,.25);}
  .sb-head{padding:10px 12px;}
  .sb-title-ar{font-size:1.2rem;}
  .sb-stats{display:none;}
  .sb-list{flex-direction:row;display:flex;overflow-x:auto;overflow-y:hidden;padding:4px 6px;}
  .kitab-btn{min-width:150px;flex-shrink:0;}
  .hc-arab{font-size:1.25rem;}
  .hadis-scroll{padding:10px;}
  .info-bar{padding:6px 12px;}
}
</style>
</head>
<body>

<nav>
  <a href="index.html" class="nav-brand">
    <img src="images/logo_nav.png" alt="Logo">
    <span>Musholla Baiturrahman</span>
  </a>
  <a href="index.html" class="nav-back">â† Kembali</a>
</nav>

<div class="layout">
  <aside class="sidebar">
    <div class="sb-head">
      <div class="sb-title-ar">ØµÙØ­ÙÙŠØ­Ù Ù…ÙØ³Ù’Ù„ÙÙ…</div>
      <div class="sb-title-id">Shahih Muslim</div>
      <div class="sb-stats">
        <div class="sb-stat"><div class="sb-stat-n">56</div><div class="sb-stat-l">Kitab</div></div>
        <div class="sb-stat"><div class="sb-stat-n">7453</div><div class="sb-stat-l">Hadis</div></div>
        <div class="sb-stat"><div class="sb-stat-n">1322</div><div class="sb-stat-l">Bab</div></div>
      </div>
      <div class="sb-search">
        <span class="sb-search-icon">ğŸ”</span>
        <input type="text" id="sbSearch" placeholder="Cari kitab atau nomor..." oninput="cariKitab(this.value)">
      </div>
    </div>
    <div class="sb-list" id="sbList">
      <div style="padding:20px;text-align:center;font-family:'Tajawal',sans-serif;font-size:.78rem;color:rgba(255,255,255,.3);">Memuat daftar kitab...</div>
    </div>
  </aside>

  <main class="main" id="mainPane">
    <div class="state-view" id="welcomeView">
      <div class="state-ar">ØµÙØ­ÙÙŠØ­Ù Ù…ÙØ³Ù’Ù„ÙÙ…</div>
      <div class="state-title">Shahih Muslim</div>
      <div class="state-body">
        Kitab hadis terpercaya karya Imam Muslim bin Al-Hajjaj Al-Qusyairi An-Naisaburi rahimahullah. Beliau mengumpulkan lebih dari 300.000 hadis lalu memilih 7.453 hadis yang paling shahih.
      </div>
      <div class="api-notice">
        ğŸ’¡ <strong>Catatan:</strong> Data hadis dimuat dari <strong>api.hadith.gading.dev</strong> secara real-time. Pastikan perangkat terhubung ke internet.
      </div>
      <div class="state-body" style="font-size:.8rem;color:var(--inkl);">â† Pilih kitab dari daftar di sebelah kiri</div>
    </div>
  </main>
</div>

<script>
(function(){
'use strict';

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA: 56 KITAB SHAHIH MUSLIM LENGKAP
   Sumber: Daftar resmi Shahih Muslim
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var KITAB = [
  {id:1,s:1,ar:'Ø§Ù„Ù’Ø¥ÙÙŠÙ…ÙØ§Ù†',                   id_name:'Iman',                              n:432},
  {id:2,s:433,ar:'Ø§Ù„Ø·ÙÙ‘Ù‡ÙØ§Ø±ÙØ©',                  id_name:'Bersuci (Thaharah)',                n:99},
  {id:3,s:532,ar:'Ø§Ù„Ù’Ø­ÙÙŠÙ’Ø¶',                     id_name:'Haid',                              n:130},
  {id:4,s:662,ar:'Ø§Ù„ØµÙÙ‘Ù„ÙØ§Ø©',                    id_name:'Shalat',                            n:309},
  {id:5,s:971,ar:'Ø§Ù„Ù’Ù…ÙØ³ÙØ§Ø¬ÙØ¯',                  id_name:'Masjid dan Tempat Shalat',          n:315},
  {id:6,s:1286,ar:'ØµÙÙ„ÙØ§Ø©Ù Ø§Ù„Ù’Ù…ÙØ³ÙØ§ÙÙØ±ÙÙŠÙ†',       id_name:'Shalat Musafir dan Qashar',         n:311},
  {id:7,s:1597,ar:'Ø§Ù„Ù’Ø¬ÙÙ…ÙØ¹ÙØ©',                   id_name:'Shalat Jumat',                      n:62},
  {id:8,s:1659,ar:'ØµÙÙ„ÙØ§Ø©Ù Ø§Ù„Ù’Ø¹ÙÙŠØ¯ÙÙŠÙ’Ù†',          id_name:'Shalat Dua Hari Raya',             n:26},
  {id:9,s:1685,ar:'ØµÙÙ„ÙØ§Ø©Ù Ø§Ù„ÙØ§Ø³Ù’ØªÙØ³Ù’Ù‚ÙØ§Ø¡',       id_name:'Shalat Istisqa (Minta Hujan)',      n:14},
  {id:10,s:1699,ar:'ØµÙÙ„ÙØ§Ø©Ù Ø§Ù„Ù’ÙƒÙØ³ÙÙˆÙ',            id_name:'Shalat Gerhana',                    n:10},
  {id:11,s:1709,ar:'Ø§Ù„Ù’Ø¬ÙÙ†ÙØ§Ø¦ÙØ²',                  id_name:'Jenazah',                           n:122},
  {id:12,s:1831,ar:'Ø§Ù„Ø²ÙÙ‘ÙƒÙØ§Ø©',                    id_name:'Zakat',                             n:174},
  {id:13,s:2005,ar:'Ø§Ù„ØµÙÙ‘ÙŠÙØ§Ù…',                    id_name:'Puasa',                             n:257},
  {id:14,s:2262,ar:'Ø§Ù„ÙØ§Ø¹Ù’ØªÙÙƒÙØ§Ù',                 id_name:'Itikaf',                            n:10},
  {id:15,s:2272,ar:'Ø§Ù„Ù’Ø­ÙØ¬Ù‘',                      id_name:'Haji',                              n:573},
  {id:16,s:2845,ar:'Ø§Ù„Ù†ÙÙ‘ÙƒÙØ§Ø­',                    id_name:'Nikah',                             n:138},
  {id:17,s:2983,ar:'Ø§Ù„Ø±ÙÙ‘Ø¶ÙØ§Ø¹',                    id_name:'Penyusuan (Radha\'ah)',              n:38},
  {id:18,s:3021,ar:'Ø§Ù„Ø·ÙÙ‘Ù„ÙØ§Ù‚',                    id_name:'Talak',                             n:66},
  {id:19,s:3087,ar:'Ø§Ù„Ù„ÙÙ‘Ø¹ÙØ§Ù†',                    id_name:'Lian',                              n:22},
  {id:20,s:3109,ar:'Ø§Ù„Ù’Ø¹ÙØªÙ’Ù‚',                     id_name:'Memerdekakan Budak',                n:13},
  {id:21,s:3122,ar:'Ø§Ù„Ù’Ø¨ÙÙŠÙÙˆØ¹',                    id_name:'Jual Beli',                         n:146},
  {id:22,s:3268,ar:'Ø§Ù„Ù’Ù…ÙØ³ÙØ§Ù‚ÙØ§Ø©',                 id_name:'Musaqah (Bagi Hasil Kebun)',        n:133},
  {id:23,s:3401,ar:'Ø§Ù„Ù„ÙÙ‘Ù‚ÙØ·ÙØ©',                   id_name:'Barang Temuan (Luqathah)',          n:8},
  {id:24,s:3409,ar:'Ø§Ù„Ù’Ù‡ÙØ¨ÙØ§Øª',                    id_name:'Hibah dan Hadiah',                  n:24},
  {id:25,s:3433,ar:'Ø§Ù„Ù’ÙˆÙØµÙÙŠÙÙ‘Ø©',                  id_name:'Wasiat',                            n:26},
  {id:26,s:3459,ar:'Ø§Ù„Ù†ÙÙ‘Ø°ÙÙˆØ±',                    id_name:'Nadzar',                            n:27},
  {id:27,s:3486,ar:'Ø§Ù„Ù’Ø£ÙÙŠÙ’Ù…ÙØ§Ù†',                  id_name:'Sumpah',                            n:56},
  {id:28,s:3542,ar:'Ø§Ù„Ù’Ù‚ÙØ³ÙØ§Ù…ÙØ©',                  id_name:'Qasaman dan Qishash',               n:44},
  {id:29,s:3586,ar:'Ø§Ù„Ù’Ø­ÙØ¯ÙÙˆØ¯',                    id_name:'Hudud (Hukuman Had)',               n:54},
  {id:30,s:3640,ar:'Ø§Ù„Ù’Ø£ÙÙ‚Ù’Ø¶ÙÙŠÙØ©',                 id_name:'Peradilan',                         n:20},
  {id:31,s:3660,ar:'Ø§Ù„Ù„ÙÙ‘Ù‚ÙØ·ÙØ© (2)',               id_name:'Temuan dan Kepemilikan',            n:12},
  {id:32,s:3672,ar:'Ø§Ù„Ù’Ø¬ÙÙ‡ÙØ§Ø¯',                    id_name:'Jihad dan Peperangan',              n:182},
  {id:33,s:3854,ar:'Ø§Ù„ØµÙÙ‘ÙŠÙ’Ø¯ ÙˆÙØ§Ù„Ø°ÙÙ‘Ø¨ÙØ§Ø¦ÙØ­',       id_name:'Berburu dan Sembelihan',            n:62},
  {id:34,s:3916,ar:'Ø§Ù„Ù’Ø£ÙØ¶ÙØ§Ø­ÙÙŠ',                  id_name:'Kurban (Udhhiyyah)',                n:44},
  {id:35,s:3960,ar:'Ø§Ù„Ù’Ø£ÙØ´Ù’Ø±ÙØ¨ÙØ©',                 id_name:'Minuman',                           n:160},
  {id:36,s:4120,ar:'Ø§Ù„Ù„ÙÙ‘Ø¨ÙØ§Ø³ ÙˆÙØ§Ù„Ø²ÙÙ‘ÙŠÙ†ÙØ©',        id_name:'Pakaian dan Perhiasan',             n:145},
  {id:37,s:4265,ar:'Ø§Ù„Ù’Ø¢Ø¯ÙØ§Ø¨',                     id_name:'Adab (Etika Islami)',               n:42},
  {id:38,s:4307,ar:'Ø§Ù„Ù’Ø£ÙÙ„Ù’ÙÙØ§Ø¸ Ù…ÙÙ†Ù Ø§Ù„Ù’Ø£ÙØ¯ÙØ¨',    id_name:'Lafaz dan Etika Berbicara',         n:31},
  {id:39,s:4338,ar:'Ø§Ù„Ø´ÙÙ‘Ø¹Ù’Ø±',                     id_name:'Syair',                             n:15},
  {id:40,s:4353,ar:'Ø§Ù„Ø±ÙÙ‘Ø¤Ù’ÙŠÙØ§',                   id_name:'Mimpi',                             n:30},
  {id:41,s:4383,ar:'Ø§Ù„Ù’ÙÙØ¶ÙØ§Ø¦ÙÙ„',                  id_name:'Keutamaan Para Sahabat',            n:208},
  {id:42,s:4591,ar:'ÙÙØ¶ÙØ§Ø¦ÙÙ„Ù Ø§Ù„ØµÙÙ‘Ø­ÙØ§Ø¨ÙØ©',        id_name:'Manaqib Sahabat',                  n:244},
  {id:43,s:4835,ar:'Ø§Ù„Ù’Ø¨ÙØ±Ù‘ ÙˆÙØ§Ù„ØµÙÙ‘Ù„ÙØ©',           id_name:'Berbakti dan Silaturahmi',          n:166},
  {id:44,s:5001,ar:'Ø§Ù„Ù’Ù‚ÙØ¯ÙØ±',                     id_name:'Takdir (Qadar)',                    n:36},
  {id:45,s:5037,ar:'Ø§Ù„Ù’Ø¹ÙÙ„Ù’Ù…',                     id_name:'Ilmu',                              n:21},
  {id:46,s:5058,ar:'Ø§Ù„Ø°ÙÙ‘ÙƒÙ’Ø± ÙˆÙØ§Ù„Ø¯ÙÙ‘Ø¹ÙØ§Ø¡',         id_name:'Dzikir dan Doa',                    n:96},
  {id:47,s:5154,ar:'Ø§Ù„ØªÙÙ‘ÙˆÙ’Ø¨ÙØ©',                   id_name:'Taubat',                            n:52},
  {id:48,s:5206,ar:'ØµÙÙÙØ©Ù Ø§Ù„Ù’Ù…ÙÙ†ÙØ§ÙÙÙ‚ÙÙŠÙ†',        id_name:'Sifat-Sifat Munafik',              n:83},
  {id:49,s:5289,ar:'ØµÙÙÙØ©Ù Ø§Ù„Ù’Ù‚ÙÙŠÙØ§Ù…ÙØ©',           id_name:'Sifat Hari Kiamat',                n:60},
  {id:50,s:5349,ar:'Ø§Ù„Ù’Ø¬ÙÙ†ÙÙ‘Ø© ÙˆÙØ§Ù„Ù†ÙÙ‘Ø§Ø±',          id_name:'Surga dan Neraka',                  n:86},
  {id:51,s:5435,ar:'Ø§Ù„Ù’ÙÙØªÙÙ†',                     id_name:'Fitnah (Huru-Hara)',                n:110},
  {id:52,s:5545,ar:'Ø§Ù„Ø²ÙÙ‘Ù‡Ù’Ø¯ ÙˆÙØ§Ù„Ø±ÙÙ‘Ù‚ÙØ§Ø¦ÙÙ‚',       id_name:'Zuhud dan Kelembutan Hati',         n:75},
  {id:53,s:5620,ar:'Ø§Ù„ØªÙÙ‘ÙÙ’Ø³ÙÙŠØ±',                  id_name:'Tafsir Al-Qur\'an',                 n:42},
  {id:54,s:5662,ar:'Ø§Ù„Ø·ÙÙ‘Ø¨Ù‘ ÙˆÙØ§Ù„Ù’Ù…ÙØ±ÙØ¶',           id_name:'Pengobatan dan Penyakit',           n:96},
  {id:55,s:5758,ar:'Ø§Ù„Ø³ÙÙ‘Ù„ÙØ§Ù…',                    id_name:'Salam',                             n:56},
  {id:56,s:5814,ar:'Ø£ÙÙ„Ù’ÙÙØ§Ø¸Ù Ø§Ù„Ø·ÙÙ‘Ù„ÙØ§Ù‚',          id_name:'Lafaz Talak',                       n:24},
];

var API   = 'https://api.hadith.gading.dev';
var PER   = 10;
var aktif = null;
var curPg = 1;
var lastData = [];

/* â”€â”€ Build Sidebar â”€â”€ */
function buildSidebar(list){
  var el = document.getElementById('sbList');
  if(!list.length){
    el.innerHTML='<div style="padding:16px;text-align:center;font-family:Tajawal,sans-serif;font-size:.75rem;color:rgba(255,255,255,.3)">Tidak ditemukan</div>';
    return;
  }
  el.innerHTML = list.map(function(k){
    return '<button class="kitab-btn'+(aktif&&aktif.id===k.id?' active':'')+'" id="kb'+k.id+'" onclick="pilihKitab('+k.id+')">'+
      '<div class="kb-num">'+k.id+'</div>'+
      '<div class="kb-text">'+
        '<div class="kb-name">'+k.id_name+'</div>'+
        '<div class="kb-count">'+k.n+' hadis</div>'+
      '</div>'+
    '</button>';
  }).join('');
}
buildSidebar(KITAB);

/* â”€â”€ Search â”€â”€ */
window.cariKitab = function(q){
  q = q.toLowerCase().trim();
  if(!q){ buildSidebar(KITAB); return; }
  buildSidebar(KITAB.filter(function(k){
    return k.id_name.toLowerCase().includes(q) || String(k.id).includes(q) || k.ar.includes(q);
  }));
};

/* â”€â”€ Pilih Kitab â”€â”€ */
window.pilihKitab = function(id){
  aktif = KITAB.find(function(k){ return k.id===id; });
  if(!aktif) return;
  curPg = 1;
  document.querySelectorAll('.kitab-btn').forEach(function(b){ b.classList.remove('active'); });
  var btn = document.getElementById('kb'+id);
  if(btn){ btn.classList.add('active'); btn.scrollIntoView({block:'nearest',behavior:'smooth'}); }
  muatHadis();
};

/* â”€â”€ Muat Hadis â”€â”€ */
/* Cache: { 'kitabId_page': [hadiths] } */
var CACHE = {};

function muatHadis(){
  if(!aktif) return;
  var localStart = (curPg-1)*PER + 1;
  var localEnd   = Math.min(curPg*PER, aktif.n);
  var cacheKey   = aktif.id + '_' + curPg;

  if(CACHE[cacheKey]){
    lastData = CACHE[cacheKey];
    renderHadis(localStart);
    return;
  }

  tampilLoading();

  /* Fetch individual per nomor global â€” endpoint /books/muslim/{number} */
  var promises = [];
  for(var n = localStart; n <= localEnd; n++){
    var globalNum = aktif.s + n - 1;
    promises.push(
      fetch(API + '/books/muslim/' + globalNum)
        .then(function(r){
          if(!r.ok) throw new Error('HTTP ' + r.status);
          return r.json();
        })
        .then(function(res){
          if(res && res.data) return res.data;
          return null;
        })
    );
  }

  Promise.all(promises)
    .then(function(results){
      var hadiths = results.filter(function(h){ return h !== null; });
      CACHE[cacheKey] = hadiths;
      lastData = hadiths;
      renderHadis(localStart);
    })
    .catch(function(err){
      /* Fallback: range endpoint */
      var globalStart = aktif.s + localStart - 1;
      var globalEnd   = aktif.s + localEnd   - 1;
      fetch(API + '/books/muslim?range=' + globalStart + '-' + globalEnd)
        .then(function(r){ return r.json(); })
        .then(function(res){
          var hadiths = [];
          if(res && res.data){
            if(Array.isArray(res.data.hadiths)) hadiths = res.data.hadiths;
            else if(Array.isArray(res.data))     hadiths = res.data;
          }
          lastData = hadiths;
          renderHadis(localStart);
        })
        .catch(function(e){ tampilError(e); });
    });
}

/* â”€â”€ Render â”€â”€ */
function renderHadis(startNum){
  var pane = document.getElementById('mainPane');
  var totalPg = Math.ceil(aktif.n / PER);
  var endNum  = Math.min(curPg*PER, aktif.n);

  var html =
    '<div class="main-head">'+
      '<div class="mh-left">'+
        '<h2>'+aktif.id_name+'</h2>'+
        '<p>Kitab ke-'+aktif.id+' Â· Shahih Muslim Â· '+aktif.n+' hadis</p>'+
      '</div>'+
      '<div class="mh-right">'+
        '<button class="nav-arrow" onclick="pindahHal('+(curPg-1)+')" '+(curPg<=1?'disabled':'')+'>â€¹</button>'+
        '<span class="page-counter">'+curPg+' / '+totalPg+'</span>'+
        '<button class="nav-arrow" onclick="pindahHal('+(curPg+1)+')" '+(curPg>=totalPg?'disabled':'')+'>â€º</button>'+
      '</div>'+
    '</div>'+
    '<div class="info-bar">'+
      '<div class="ib-item">ğŸ“„ Hadis <strong>'+startNum+'â€“'+endNum+'</strong> dari <strong>'+aktif.n+'</strong></div>'+
      '<div class="ib-item">ğŸ“‹ Halaman <strong>'+curPg+'</strong> dari <strong>'+totalPg+'</strong></div>'+
      '<div class="ib-item">ğŸ“— Shahih Muslim</div>'+
    '</div>'+
    '<div class="hadis-scroll" id="hadisScroll">';

  if(!lastData.length){
    html += '<div class="state-view"><div class="state-icon">ğŸ“­</div>'+
      '<div class="state-title">Tidak Ada Data</div>'+
      '<div class="state-body">API tidak mengembalikan hadis. Coba halaman lain atau periksa koneksi.</div></div>';
  } else {
    lastData.forEach(function(h, i){
      var num   = (h.number || h.no || (startNum + i));
      var arab  = (h.arab || h.text_ar || '').trim();
      var trjm  = (h.id   || h.text_id || h.en || h.text_en || '').trim();
      var perawi = (h.chain || h.narrator || '').trim();
      html +=
        '<div class="hadis-card">'+
          '<div class="hc-top">'+
            '<div class="hc-badge">'+
              '<div class="hc-num">'+num+'</div>'+
              '<div class="hc-meta">Kitab <b>'+aktif.id_name+'</b> Â· Hadis No.&nbsp;'+num+'</div>'+
            '</div>'+
            '<div class="hc-actions">'+
              '<button class="hc-action" onclick="salinHadis('+num+',this)" title="Salin terjemahan">ğŸ“‹</button>'+
            '</div>'+
          '</div>'+
          (arab ? '<div class="hc-arab">'+arab+'</div>' : '')+
          '<div class="hc-sep"><div class="hc-sep-line"></div><div class="hc-sep-label">Terjemahan</div><div class="hc-sep-line"></div></div>'+
          '<div class="hc-terjemah">'+(trjm||'<em style="color:var(--inkl);font-style:italic">Terjemahan tidak tersedia untuk hadis ini.</em>')+'</div>'+
          (perawi ? '<div class="hc-perawi">ğŸ“œ Diriwayatkan: '+perawi+'</div>' : '')+
        '</div>';
    });
  }

  html += '</div>';
  html += buildPagination(curPg, totalPg);
  pane.innerHTML = html;
}

/* â”€â”€ Pagination â”€â”€ */
function buildPagination(cur, total){
  if(total <= 1) return '';
  var pages = [];
  if(total <= 7){
    for(var i=1;i<=total;i++) pages.push(i);
  } else {
    pages.push(1);
    if(cur > 3) pages.push('â€¦');
    var lo = Math.max(2,cur-1), hi = Math.min(total-1,cur+1);
    for(var p=lo;p<=hi;p++) pages.push(p);
    if(cur < total-2) pages.push('â€¦');
    pages.push(total);
  }
  var html = '<div class="pagination">'+
    '<button class="pg-btn" onclick="pindahHal(1)" '+(cur<=1?'disabled':'')+'>Â«</button>'+
    '<button class="pg-btn" onclick="pindahHal('+(cur-1)+')" '+(cur<=1?'disabled':'')+'>â€¹</button>';
  pages.forEach(function(p){
    if(p==='â€¦') html += '<button class="pg-btn dots">â€¦</button>';
    else html += '<button class="pg-btn'+(p===cur?' active':'')+'" onclick="pindahHal('+p+')">'+p+'</button>';
  });
  html += '<button class="pg-btn" onclick="pindahHal('+(cur+1)+')" '+(cur>=total?'disabled':'')+'>â€º</button>'+
          '<button class="pg-btn" onclick="pindahHal('+total+')" '+(cur>=total?'disabled':'')+'>Â»</button>'+
          '</div>';
  return html;
}

/* â”€â”€ Pindah Halaman â”€â”€ */
window.pindahHal = function(pg){
  if(!aktif) return;
  var total = Math.ceil(aktif.n / PER);
  if(pg < 1 || pg > total) return;
  curPg = pg;
  muatHadis();
  var sc = document.getElementById('hadisScroll');
  if(sc) sc.scrollTop = 0;
};

/* â”€â”€ States â”€â”€ */
function tampilLoading(){
  document.getElementById('mainPane').innerHTML =
    '<div class="state-view"><div class="spinner"></div>'+
    '<div class="state-body">Memuat hadis dari server...</div></div>';
}

function tampilError(err){
  document.getElementById('mainPane').innerHTML =
    '<div class="state-view">'+
      '<div class="err-box">'+
        '<p>âš ï¸ <strong>Gagal memuat hadis.</strong><br>Periksa koneksi internet dan coba lagi.'+
        (err ? '<code>'+err.message+'</code>' : '')+
        '</p>'+
        '<button class="btn-retry" onclick="muatHadis()">ğŸ”„ Coba Lagi</button>'+
      '</div>'+
      '<div class="api-notice" style="margin-top:12px">'+
        'ğŸ“¡ Data dimuat dari <strong>api.hadith.gading.dev</strong>. '+
        'Jika server API tidak tersedia, data tidak dapat dimuat sementara.'+
      '</div>'+
    '</div>';
}

/* â”€â”€ Salin Hadis â”€â”€ */
window.salinHadis = function(num, btn){
  var card = btn.closest('.hadis-card');
  var trjm = card.querySelector('.hc-terjemah');
  if(!trjm) return;
  var teks = '[Shahih Muslim No. '+num+']\n\n'+trjm.innerText+'\n\nâ€” Musholla Baiturrahman';
  if(navigator.clipboard){
    navigator.clipboard.writeText(teks).then(function(){
      btn.textContent='âœ…'; btn.classList.add('copied');
      setTimeout(function(){ btn.textContent='ğŸ“‹'; btn.classList.remove('copied'); }, 2200);
    });
  }
};

window.muatHadis = muatHadis;

})();
</script>
</body>
</html>
