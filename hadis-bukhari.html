<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shahih Al-Bukhari â€” Musholla Baiturrahman</title>
<link rel="icon" type="image/png" href="images/logo.png">
<link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Tajawal:wght@300;400;500;700&family=Crimson+Pro:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
<style>
:root {
  --deep:    #0b2d22;
  --mid:     #134836;
  --bright:  #1a7a52;
  --light:   #27ae74;
  --gold:    #c9a84c;
  --goldl:   #e8c97a;
  --goldf:   #f5e6b0;
  --cream:   #f8f4ec;
  --creamd:  #eae4d6;
  --creamdd: #d8d0be;
  --white:   #ffffff;
  --ink:     #1c1c1c;
  --inkm:    #444;
  --inkl:    #788;
  --ok:      #16a34a;
  --err:     #dc2626;
  --sb-w:    280px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Crimson Pro', Georgia, serif;
  background: var(--cream);
  color: var(--ink);
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* â”€â”€â”€ NAV â”€â”€â”€ */
nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 200;
  height: 60px;
  background: var(--deep);
  border-bottom: 2px solid var(--gold);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 1.5rem;
  flex-shrink: 0;
}
.nav-brand { display: flex; align-items: center; gap: 10px; text-decoration: none; }
.nav-brand img { height: 34px; }
.nav-brand span { font-size: 0.82rem; font-weight: 600; color: #fff; font-family: 'Tajawal', sans-serif; }
.nav-right { display: flex; align-items: center; gap: 10px; }
.nav-back {
  font-family: 'Tajawal', sans-serif;
  font-size: 0.78rem; font-weight: 500;
  color: rgba(255,255,255,.75);
  text-decoration: none;
  padding: 5px 13px;
  border-radius: 6px;
  border: 1px solid rgba(255,255,255,.2);
  transition: all .2s;
}
.nav-back:hover { background: rgba(255,255,255,.1); color: var(--goldl); }

/* â”€â”€â”€ LAYOUT â”€â”€â”€ */
.layout {
  display: flex;
  height: calc(100vh - 60px);
  margin-top: 60px;
}

/* â”€â”€â”€ SIDEBAR â”€â”€â”€ */
.sidebar {
  width: var(--sb-w);
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  background: var(--deep);
  border-right: 1px solid rgba(201,168,76,.25);
  overflow: hidden;
}

.sb-head {
  padding: 18px 16px 14px;
  border-bottom: 1px solid rgba(255,255,255,.07);
  flex-shrink: 0;
}
.sb-title-ar {
  font-family: 'Amiri', serif;
  font-size: 1.6rem;
  color: var(--goldl);
  direction: rtl;
  text-align: right;
  line-height: 1.2;
  margin-bottom: 2px;
}
.sb-title-id {
  font-family: 'Tajawal', sans-serif;
  font-size: 0.72rem;
  font-weight: 500;
  color: rgba(255,255,255,.5);
  letter-spacing: .06em;
  text-transform: uppercase;
  margin-bottom: 12px;
}
.sb-stats {
  display: flex; gap: 8px; margin-bottom: 12px;
}
.sb-stat {
  flex: 1;
  background: rgba(201,168,76,.12);
  border: 1px solid rgba(201,168,76,.2);
  border-radius: 8px;
  padding: 6px 8px;
  text-align: center;
}
.sb-stat-n { font-family: 'Tajawal', sans-serif; font-size: 1rem; font-weight: 700; color: var(--goldl); line-height: 1; }
.sb-stat-l { font-family: 'Tajawal', sans-serif; font-size: 0.58rem; color: rgba(255,255,255,.4); margin-top: 2px; text-transform: uppercase; letter-spacing: .05em; }

.sb-search {
  position: relative;
}
.sb-search input {
  width: 100%;
  padding: 8px 12px 8px 34px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 8px;
  color: #fff;
  font-family: 'Tajawal', sans-serif;
  font-size: 0.82rem;
  outline: none;
  transition: all .2s;
}
.sb-search input::placeholder { color: rgba(255,255,255,.35); }
.sb-search input:focus { background: rgba(255,255,255,.13); border-color: rgba(201,168,76,.4); }
.sb-search-icon {
  position: absolute; left: 10px; top: 50%;
  transform: translateY(-50%);
  font-size: 0.8rem; pointer-events: none;
}

.sb-list {
  flex: 1;
  overflow-y: auto;
  padding: 6px;
}
.sb-list::-webkit-scrollbar { width: 3px; }
.sb-list::-webkit-scrollbar-thumb { background: rgba(255,255,255,.1); border-radius: 2px; }

.kitab-btn {
  display: flex;
  align-items: center;
  gap: 9px;
  width: 100%;
  padding: 8px 9px;
  border-radius: 8px;
  border: none;
  background: transparent;
  cursor: pointer;
  text-align: left;
  transition: background .15s;
  color: rgba(255,255,255,.7);
}
.kitab-btn:hover { background: rgba(255,255,255,.07); color: #fff; }
.kitab-btn.active {
  background: linear-gradient(90deg, rgba(201,168,76,.2), rgba(201,168,76,.08));
  border-left: 3px solid var(--gold);
  padding-left: 6px;
  color: var(--goldl);
}
.kitab-btn.active .kb-num { background: rgba(201,168,76,.25); color: var(--goldl); }

.kb-num {
  width: 28px; height: 28px; flex-shrink: 0;
  background: rgba(255,255,255,.07);
  border-radius: 6px;
  display: grid; place-items: center;
  font-family: 'Tajawal', sans-serif;
  font-size: 0.65rem; font-weight: 700;
  color: rgba(255,255,255,.4);
}
.kb-text { flex: 1; min-width: 0; }
.kb-name {
  font-family: 'Tajawal', sans-serif;
  font-size: 0.79rem; font-weight: 500;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  line-height: 1.3;
}
.kb-count {
  font-family: 'Tajawal', sans-serif;
  font-size: 0.62rem;
  color: rgba(255,255,255,.3);
  margin-top: 1px;
}
.kitab-btn.active .kb-count { color: rgba(201,168,76,.6); }

/* â”€â”€â”€ MAIN CONTENT â”€â”€â”€ */
.main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: var(--cream);
}

/* Content header */
.main-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 22px;
  background: var(--white);
  border-bottom: 2px solid var(--creamd);
  flex-shrink: 0;
  gap: 12px;
  flex-wrap: wrap;
}
.mh-left h2 {
  font-family: 'Amiri', serif;
  font-size: 1.3rem;
  color: var(--deep);
  line-height: 1.2;
}
.mh-left p {
  font-family: 'Tajawal', sans-serif;
  font-size: 0.68rem;
  color: var(--inkl);
  margin-top: 2px;
}
.mh-right { display: flex; align-items: center; gap: 8px; flex-shrink: 0; }
.nav-arrow {
  width: 32px; height: 32px;
  border-radius: 8px;
  border: 1.5px solid var(--creamd);
  background: var(--white);
  font-size: 0.85rem;
  cursor: pointer;
  display: grid; place-items: center;
  transition: all .15s;
  color: var(--inkm);
}
.nav-arrow:hover:not(:disabled) { background: var(--deep); color: #fff; border-color: var(--deep); }
.nav-arrow:disabled { opacity: .3; cursor: not-allowed; }
.page-counter {
  font-family: 'Tajawal', sans-serif;
  font-size: 0.78rem;
  color: var(--inkl);
  white-space: nowrap;
  padding: 4px 10px;
  background: var(--cream);
  border-radius: 6px;
  border: 1px solid var(--creamd);
}

/* Info bar */
.info-bar {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 8px 22px;
  background: rgba(13,59,46,.04);
  border-bottom: 1px solid var(--creamd);
  flex-shrink: 0;
  flex-wrap: wrap;
}
.ib-item {
  display: flex; align-items: center; gap: 5px;
  font-family: 'Tajawal', sans-serif;
  font-size: 0.7rem;
  color: var(--inkl);
}
.ib-item strong { color: var(--bright); font-weight: 600; }

/* â”€â”€â”€ HADIS LIST â”€â”€â”€ */
.hadis-scroll {
  flex: 1;
  overflow-y: auto;
  padding: 16px 20px 8px;
}
.hadis-scroll::-webkit-scrollbar { width: 5px; }
.hadis-scroll::-webkit-scrollbar-thumb { background: var(--creamd); border-radius: 3px; }

.hadis-card {
  background: var(--white);
  border-radius: 14px;
  margin-bottom: 14px;
  border: 1px solid var(--creamd);
  overflow: hidden;
  transition: box-shadow .2s, transform .2s;
}
.hadis-card:hover {
  box-shadow: 0 6px 24px rgba(13,59,46,.08);
  transform: translateY(-1px);
}

.hc-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: linear-gradient(90deg, rgba(13,59,46,.03), transparent);
  border-bottom: 1px solid var(--creamd);
}
.hc-badge {
  display: flex; align-items: center; gap: 8px;
}
.hc-num {
  width: 34px; height: 34px;
  background: linear-gradient(135deg, var(--deep), var(--mid));
  border-radius: 9px;
  display: grid; place-items: center;
  font-family: 'Tajawal', sans-serif;
  font-size: 0.7rem; font-weight: 700;
  color: var(--goldl);
}
.hc-meta {
  font-family: 'Tajawal', sans-serif;
  font-size: 0.7rem;
  color: var(--inkl);
  line-height: 1.5;
}
.hc-meta b { color: var(--bright); font-weight: 600; }
.hc-actions { display: flex; gap: 6px; }
.hc-action {
  width: 28px; height: 28px;
  border-radius: 7px;
  border: 1px solid var(--creamd);
  background: var(--white);
  cursor: pointer;
  display: grid; place-items: center;
  font-size: 0.78rem;
  transition: all .15s;
  color: var(--inkl);
}
.hc-action:hover { border-color: var(--bright); color: var(--bright); }
.hc-action.copied { border-color: var(--ok); color: var(--ok); background: rgba(22,163,74,.06); }

/* Arabic text */
.hc-arab {
  font-family: 'Amiri', serif;
  font-size: 1.5rem;
  line-height: 2.3;
  direction: rtl;
  text-align: right;
  color: var(--ink);
  padding: 18px 20px 14px;
  background: linear-gradient(160deg, rgba(201,168,76,.04) 0%, transparent 60%);
  border-bottom: 1px solid var(--creamd);
  position: relative;
}
.hc-arab::before {
  content: '';
  position: absolute;
  right: 0; top: 0; bottom: 0;
  width: 4px;
  background: linear-gradient(180deg, var(--gold), var(--goldl));
  border-radius: 0 0 0 4px;
}

/* Separator */
.hc-sep {
  display: flex; align-items: center; gap: 10px;
  padding: 0 16px;
  margin: 0;
}
.hc-sep-line { flex: 1; height: 1px; background: var(--creamd); }
.hc-sep-label {
  font-family: 'Tajawal', sans-serif;
  font-size: 0.6rem;
  font-weight: 700;
  letter-spacing: .1em;
  text-transform: uppercase;
  color: var(--inkl);
  padding: 4px 0;
}

/* Translation */
.hc-terjemah {
  font-family: 'Crimson Pro', serif;
  font-size: 1rem;
  line-height: 1.85;
  color: var(--inkm);
  padding: 12px 20px 16px;
  border-left: 3px solid var(--light);
  margin: 8px 16px 12px;
  border-radius: 0 8px 8px 0;
  background: rgba(39,174,116,.04);
}

/* Perawi */
.hc-perawi {
  padding: 0 16px 12px;
  font-family: 'Tajawal', sans-serif;
  font-size: 0.68rem;
  color: var(--inkl);
  display: flex; align-items: center; gap: 5px;
}

/* â”€â”€â”€ PAGINATION â”€â”€â”€ */
.pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  padding: 10px 20px;
  border-top: 1px solid var(--creamd);
  background: var(--white);
  flex-shrink: 0;
  flex-wrap: wrap;
}
.pg-btn {
  min-width: 34px; height: 34px;
  padding: 0 8px;
  border-radius: 8px;
  border: 1.5px solid var(--creamd);
  background: var(--white);
  font-family: 'Tajawal', sans-serif;
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--deep);
  cursor: pointer;
  transition: all .18s;
  display: grid; place-items: center;
}
.pg-btn:hover:not(:disabled):not(.dots) {
  background: var(--deep);
  color: var(--goldl);
  border-color: var(--deep);
}
.pg-btn.active {
  background: var(--deep);
  color: var(--goldl);
  border-color: var(--deep);
}
.pg-btn:disabled { opacity: .3; cursor: not-allowed; }
.pg-btn.dots { border-color: transparent; background: transparent; cursor: default; }

/* â”€â”€â”€ STATES: PLACEHOLDER / LOADING / ERROR â”€â”€â”€ */
.state-view {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 24px;
  text-align: center;
  gap: 16px;
}
.state-icon { font-size: 3.2rem; opacity: .35; }
.state-title {
  font-family: 'Amiri', serif;
  font-size: 1.6rem;
  color: var(--deep);
}
.state-body {
  font-family: 'Tajawal', sans-serif;
  font-size: 0.85rem;
  color: var(--inkl);
  line-height: 1.75;
  max-width: 380px;
}
.state-ar {
  font-family: 'Amiri', serif;
  font-size: 1.8rem;
  color: var(--gold);
  direction: rtl;
}
.spinner {
  width: 42px; height: 42px;
  border: 3px solid var(--creamd);
  border-top-color: var(--bright);
  border-radius: 50%;
  animation: spin .8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Error */
.err-box {
  background: #fff5f5;
  border: 1px solid #fecaca;
  border-radius: 12px;
  padding: 20px 24px;
  max-width: 420px;
  width: 100%;
}
.err-box p { font-family: 'Tajawal', sans-serif; font-size: .83rem; color: #c0392b; line-height: 1.7; }
.err-box code { display: block; margin-top: 6px; font-size: .72rem; color: #888; background: #f5f5f5; padding: 4px 8px; border-radius: 4px; }
.btn-retry {
  margin-top: 12px;
  padding: 8px 22px;
  border-radius: 8px;
  background: var(--deep);
  color: #fff;
  font-family: 'Tajawal', sans-serif;
  font-size: .82rem; font-weight: 600;
  border: none; cursor: pointer;
  transition: background .15s;
}
.btn-retry:hover { background: var(--mid); }

/* Notice */
.api-notice {
  background: rgba(201,168,76,.08);
  border: 1px solid rgba(201,168,76,.25);
  border-radius: 10px;
  padding: 12px 16px;
  font-family: 'Tajawal', sans-serif;
  font-size: 0.75rem;
  color: var(--inkm);
  line-height: 1.65;
  max-width: 480px;
  text-align: left;
}

/* â”€â”€â”€ RESPONSIVE â”€â”€â”€ */
@media (max-width: 860px) {
  :root { --sb-w: 240px; }
  .hadis-scroll { padding: 12px; }
}
@media (max-width: 620px) {
  nav .nav-brand span { display: none; }
  .layout { flex-direction: column; }
  .sidebar {
    width: 100%;
    height: 180px;
    border-right: none;
    border-bottom: 1px solid rgba(201,168,76,.25);
  }
  .sb-head { padding: 10px 12px; }
  .sb-title-ar { font-size: 1.2rem; }
  .sb-stats { display: none; }
  .sb-list {
    flex-direction: row;
    display: flex;
    overflow-x: auto;
    overflow-y: hidden;
    padding: 4px 6px;
  }
  .kitab-btn { min-width: 150px; flex-shrink: 0; }
  .hc-arab { font-size: 1.25rem; }
  .hadis-scroll { padding: 10px; }
  .info-bar { padding: 6px 12px; }
}
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <a href="index.html" class="nav-brand">
    <img src="images/logo_nav.png" alt="Logo">
    <span>Musholla Baiturrahman</span>
  </a>
  <div class="nav-right">
    <a href="index.html" class="nav-back">â† Kembali</a>
  </div>
</nav>

<div class="layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sb-head">
      <div class="sb-title-ar">ØµÙØ­ÙÙŠØ­Ù Ø§Ù„Ù’Ø¨ÙØ®ÙØ§Ø±ÙÙŠ</div>
      <div class="sb-title-id">Shahih Al-Bukhari</div>
      <div class="sb-stats">
        <div class="sb-stat"><div class="sb-stat-n">97</div><div class="sb-stat-l">Kitab</div></div>
        <div class="sb-stat"><div class="sb-stat-n">7563</div><div class="sb-stat-l">Hadis</div></div>
        <div class="sb-stat"><div class="sb-stat-n">194</div><div class="sb-stat-l">Bab</div></div>
      </div>
      <div class="sb-search">
        <span class="sb-search-icon">ğŸ”</span>
        <input type="text" id="sbSearch" placeholder="Cari kitab atau nomor..." oninput="cariKitab(this.value)">
      </div>
    </div>
    <div class="sb-list" id="sbList">
      <div style="padding:20px;text-align:center;font-family:'Tajawal',sans-serif;font-size:.78rem;color:rgba(255,255,255,.3);">Memuat daftar kitab...</div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main" id="mainPane">
    <div class="state-view" id="welcomeView">
      <div class="state-ar">ØµÙØ­ÙÙŠØ­Ù Ø§Ù„Ù’Ø¨ÙØ®ÙØ§Ø±ÙÙŠ</div>
      <div class="state-title">Shahih Al-Bukhari</div>
      <div class="state-body">
        Kitab hadis paling shahih setelah Al-Qur'an. Dikumpulkan oleh Imam Muhammad bin Ismail Al-Bukhari rahimahullah selama 16 tahun. Beliau memilih 7.563 hadis dari 600.000 hadis yang dipelajarinya.
      </div>
      <div class="api-notice">
        ğŸ’¡ <strong>Catatan:</strong> Data hadis dimuat langsung dari server API <strong>api.hadith.gading.dev</strong> secara real-time. Pastikan perangkat Anda terhubung ke internet untuk membaca hadis.
      </div>
      <div class="state-body" style="font-size:.8rem;color:var(--inkl);">
        â† Pilih kitab dari daftar di sebelah kiri
      </div>
    </div>
  </main>

</div>

<script>
(function(){
'use strict';

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA: 97 KITAB SHAHIH BUKHARI LENGKAP
   Sumber: Daftar resmi Shahih Bukhari
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var KITAB = [
  {id:1,s:1,ar:'Ø¨ÙØ¯Ù’Ø¡Ù Ø§Ù„Ù’ÙˆÙØ­Ù’ÙŠ',       id_name:'Permulaan Wahyu',              n:7},
  {id:2,s:8,ar:'Ø§Ù„Ù’Ø¥ÙÙŠÙ…ÙØ§Ù†',            id_name:'Iman',                          n:51},
  {id:3,s:59,ar:'Ø§Ù„Ù’Ø¹ÙÙ„Ù’Ù…',              id_name:'Ilmu',                          n:76},
  {id:4,s:135,ar:'Ø§Ù„Ù’ÙˆÙØ¶ÙÙˆØ¡',             id_name:'Wudhu',                         n:75},
  {id:5,s:210,ar:'Ø§Ù„Ù’ØºÙØ³Ù’Ù„',              id_name:'Mandi',                         n:28},
  {id:6,s:238,ar:'Ø§Ù„Ù’Ø­ÙÙŠÙ’Ø¶',              id_name:'Haid',                          n:32},
  {id:7,s:270,ar:'Ø§Ù„ØªÙÙ‘ÙŠÙÙ…ÙÙ‘Ù…',           id_name:'Tayamum',                       n:9},
  {id:8,s:279,ar:'Ø§Ù„ØµÙÙ‘Ù„ÙØ§Ø©',             id_name:'Shalat',                        n:106},
  {id:9,s:385,ar:'Ù…ÙÙˆÙØ§Ù‚ÙÙŠØªÙ Ø§Ù„ØµÙÙ‘Ù„ÙØ§Ø©', id_name:'Waktu-Waktu Shalat',            n:52},
  {id:10,s:437,ar:'Ø§Ù„Ù’Ø£ÙØ°ÙØ§Ù†',             id_name:'Adzan',                         n:166},
  {id:11,s:603,ar:'Ø§Ù„Ù’Ø¬ÙÙ…ÙØ¹ÙØ©',            id_name:'Shalat Jumat',                  n:45},
  {id:12,s:648,ar:'ØµÙÙ„ÙØ§Ø©Ù Ø§Ù„Ù’Ø®ÙÙˆÙ’Ù',     id_name:'Shalat Khauf',                  n:7},
  {id:13,s:655,ar:'Ø§Ù„Ù’Ø¹ÙÙŠØ¯ÙÙŠÙ’Ù†',           id_name:'Dua Hari Raya',                 n:25},
  {id:14,s:680,ar:'Ø§Ù„Ù’ÙˆÙØªÙ’Ø±',              id_name:'Shalat Witir',                  n:12},
  {id:15,s:692,ar:'Ø§Ù„ÙØ§Ø³Ù’ØªÙØ³Ù’Ù‚ÙØ§Ø¡',        id_name:'Shalat Istisqa',                n:14},
  {id:16,s:706,ar:'Ø§Ù„Ù’ÙƒÙØ³ÙÙˆÙ',             id_name:'Shalat Gerhana',                n:14},
  {id:17,s:720,ar:'Ø³ÙØ¬ÙÙˆØ¯Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†',    id_name:'Sujud Tilawah',                 n:11},
  {id:18,s:731,ar:'Ø§Ù„ØªÙÙ‘Ù‡ÙØ¬ÙÙ‘Ø¯',           id_name:'Shalat Tahajud',                n:32},
  {id:19,s:763,ar:'ÙÙØ¶Ù’Ù„Ù Ø§Ù„ØµÙÙ‘Ù„ÙØ§Ø© ÙÙÙŠ Ù…ÙØ³Ù’Ø¬ÙØ¯Ù Ù…ÙÙƒÙÙ‘Ø©', id_name:'Keutamaan Shalat di Masjidil Haram', n:4},
  {id:20,s:767,ar:'Ø§Ù„Ù’Ø¹ÙÙ…ÙÙ„Ù ÙÙÙŠ Ø§Ù„ØµÙÙ‘Ù„ÙØ§Ø©', id_name:'Gerakan dalam Shalat',       n:29},
  {id:21,s:796,ar:'Ø§Ù„Ø³ÙÙ‘Ù‡Ù’Ùˆ',              id_name:'Sujud Sahwi',                   n:8},
  {id:22,s:804,ar:'Ø§Ù„Ù’Ø¬ÙÙ†ÙØ§Ø¦ÙØ²',           id_name:'Jenazah',                       n:101},
  {id:23,s:905,ar:'Ø§Ù„Ø²ÙÙ‘ÙƒÙØ§Ø©',             id_name:'Zakat',                         n:77},
  {id:24,s:982,ar:'ØµÙØ¯ÙÙ‚ÙØ©Ù Ø§Ù„Ù’ÙÙØ·Ù’Ø±',    id_name:'Zakat Fitrah',                  n:14},
  {id:25,s:996,ar:'Ø§Ù„Ù’Ø­ÙØ¬Ù‘',               id_name:'Haji',                          n:132},
  {id:26,s:1128,ar:'Ø§Ù„Ù’Ø¹ÙÙ…Ù’Ø±ÙØ©',            id_name:'Umroh',                         n:22},
  {id:27,s:1150,ar:'Ø§Ù„Ù’Ù…ÙØ­Ù’ØµÙØ±',            id_name:'Orang yang Terhalang Haji',    n:19},
  {id:28,s:1169,ar:'Ø¬ÙØ²ÙØ§Ø¡Ù Ø§Ù„ØµÙÙ‘ÙŠÙ’Ø¯',    id_name:'Denda Berburu saat Ihram',      n:29},
  {id:29,s:1198,ar:'ÙÙØ¶ÙØ§Ø¦ÙÙ„Ù Ø§Ù„Ù’Ù…ÙØ¯ÙÙŠÙ†ÙØ©', id_name:'Keutamaan Madinah',            n:19},
  {id:30,s:1217,ar:'Ø§Ù„ØµÙÙ‘ÙˆÙ’Ù…',              id_name:'Puasa',                         n:60},
  {id:31,s:1277,ar:'ØµÙÙ„ÙØ§Ø©Ù Ø§Ù„ØªÙÙ‘Ø±ÙØ§ÙˆÙÙŠØ­', id_name:'Shalat Tarawih',                n:9},
  {id:32,s:1286,ar:'ÙÙØ¶Ù’Ù„Ù Ù„ÙÙŠÙ’Ù„ÙØ©Ù Ø§Ù„Ù’Ù‚ÙØ¯Ù’Ø±', id_name:'Keutamaan Lailatul Qadar', n:6},
  {id:33,s:1292,ar:'Ø§Ù„ÙØ§Ø¹Ù’ØªÙÙƒÙØ§Ù',          id_name:'Itikaf',                        n:20},
  {id:34,s:1312,ar:'Ø§Ù„Ù’Ø¨ÙÙŠÙÙˆØ¹',             id_name:'Jual Beli',                     n:105},
  {id:35,s:1417,ar:'Ø§Ù„Ø³ÙÙ‘Ù„ÙÙ…',              id_name:'Jual Beli Salam',               n:23},
  {id:36,s:1440,ar:'Ø§Ù„Ø´ÙÙ‘ÙÙ’Ø¹ÙØ©',            id_name:'Syuf\'ah',                      n:8},
  {id:37,s:1448,ar:'Ø§Ù„Ù’Ø¥ÙØ¬ÙØ§Ø±ÙØ©',           id_name:'Sewa-Menyewa',                  n:22},
  {id:38,s:1470,ar:'Ø§Ù„Ù’Ø­ÙÙˆÙØ§Ù„ÙØ©',           id_name:'Hiwalah (Pemindahan Hutang)',   n:4},
  {id:39,s:1474,ar:'Ø§Ù„Ù’ÙˆÙÙƒÙØ§Ù„ÙØ©',           id_name:'Wakalah (Perwakilan)',          n:16},
  {id:40,s:1490,ar:'Ø§Ù„Ù’Ù…ÙØ²ÙØ§Ø±ÙØ¹ÙØ©',         id_name:'Muzara\'ah (Bagi Hasil Tani)', n:22},
  {id:41,s:1512,ar:'Ø§Ù„Ù’Ù…ÙØ³ÙØ§Ù‚ÙØ§Ø©',          id_name:'Musaqah (Bagi Hasil Kebun)',   n:17},
  {id:42,s:1529,ar:'Ø§Ù„ÙØ§Ø³Ù’ØªÙÙ‚Ù’Ø±ÙØ§Ø¶',        id_name:'Utang Piutang',                 n:20},
  {id:43,s:1549,ar:'Ø§Ù„Ù’Ø®ÙØµÙÙˆÙ…ÙØ§Øª',          id_name:'Perselisihan',                  n:8},
  {id:44,s:1557,ar:'Ø§Ù„Ù„ÙÙ‘Ù‚ÙØ·ÙØ©',            id_name:'Barang Temuan (Luqathah)',      n:11},
  {id:45,s:1568,ar:'Ø§Ù„Ù’Ù…ÙØ¸ÙØ§Ù„ÙÙ…',           id_name:'Kezaliman dan Perampasan',      n:30},
  {id:46,s:1598,ar:'Ø§Ù„Ø´ÙÙ‘Ø±ÙÙƒÙØ©',            id_name:'Perkongsian (Syirkah)',         n:15},
  {id:47,s:1613,ar:'Ø§Ù„Ø±ÙÙ‘Ù‡Ù’Ù†',              id_name:'Gadai (Rahn)',                   n:5},
  {id:48,s:1618,ar:'Ø§Ù„Ù’Ø¹ÙØªÙ’Ù‚',              id_name:'Memerdekakan Budak',            n:20},
  {id:49,s:1638,ar:'Ø§Ù„Ù’Ù…ÙÙƒÙØ§ØªÙØ¨',           id_name:'Perjanjian Memerdekakan',       n:6},
  {id:50,s:1644,ar:'Ø§Ù„Ù’Ù‡ÙØ¨ÙØ©',              id_name:'Hibah dan Hadiah',              n:30},
  {id:51,s:1674,ar:'Ø§Ù„Ø´ÙÙ‘Ù‡ÙØ§Ø¯ÙØ§Øª',          id_name:'Persaksian',                    n:23},
  {id:52,s:1697,ar:'Ø§Ù„ØµÙÙ‘Ù„Ù’Ø­',              id_name:'Perdamaian (Sulhu)',             n:14},
  {id:53,s:1711,ar:'Ø§Ù„Ø´ÙÙ‘Ø±ÙÙˆØ·',             id_name:'Syarat-Syarat',                 n:18},
  {id:54,s:1729,ar:'Ø§Ù„Ù’ÙˆÙØµÙØ§ÙŠÙØ§',           id_name:'Wasiat',                        n:28},
  {id:55,s:1757,ar:'Ø§Ù„Ù’Ø¬ÙÙ‡ÙØ§Ø¯',             id_name:'Jihad dan Peperangan',          n:176},
  {id:56,s:1933,ar:'Ø§Ù„Ù’Ø®ÙÙ…ÙØ³',              id_name:'Khumus (Seperlima Ghanimah)',   n:19},
  {id:57,s:1952,ar:'Ø§Ù„Ù’Ø¬ÙØ²Ù’ÙŠÙØ©',            id_name:'Jizyah dan Gencatan Senjata',  n:23},
  {id:58,s:1975,ar:'Ø¨ÙØ¯Ù’Ø¡Ù Ø§Ù„Ù’Ø®ÙÙ„Ù’Ù‚',       id_name:'Permulaan Penciptaan',          n:56},
  {id:59,s:2031,ar:'Ø£ÙØ­ÙØ§Ø¯ÙÙŠØ«Ù Ø§Ù„Ù’Ø£ÙÙ†Ù’Ø¨ÙÙŠÙØ§Ø¡', id_name:'Kisah Para Nabi',           n:55},
  {id:60,s:2086,ar:'Ø§Ù„Ù’Ù…ÙÙ†ÙØ§Ù‚ÙØ¨',           id_name:'Keutamaan Para Sahabat',        n:274},
  {id:61,s:2360,ar:'Ù…ÙÙ†ÙØ§Ù‚ÙØ¨Ù Ø§Ù„Ù’Ø£ÙÙ†Ù’ØµÙØ§Ø±', id_name:'Manaqib Kaum Anshar',          n:51},
  {id:62,s:2411,ar:'Ø§Ù„Ù’Ù…ÙØºÙØ§Ø²ÙÙŠ',           id_name:'Peperangan (Maghazi)',          n:83},
  {id:63,s:2494,ar:'Ø§Ù„ØªÙÙ‘ÙÙ’Ø³ÙÙŠØ±',           id_name:'Tafsir Al-Qur\'an',             n:490},
  {id:64,s:2984,ar:'ÙÙØ¶ÙØ§Ø¦ÙÙ„Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†',  id_name:'Keutamaan Al-Qur\'an',          n:36},
  {id:65,s:3020,ar:'Ø§Ù„Ù†ÙÙ‘ÙƒÙØ§Ø­',             id_name:'Nikah',                         n:113},
  {id:66,s:3133,ar:'Ø§Ù„Ø·ÙÙ‘Ù„ÙØ§Ù‚',             id_name:'Talak',                         n:53},
  {id:67,s:3186,ar:'Ø§Ù„Ù†ÙÙ‘ÙÙÙ‚ÙØ§Øª',           id_name:'Nafkah',                        n:26},
  {id:68,s:3212,ar:'Ø§Ù„Ù’Ø£ÙØ·Ù’Ø¹ÙÙ…ÙØ©',          id_name:'Makanan',                       n:53},
  {id:69,s:3265,ar:'Ø§Ù„Ù’Ø¹ÙÙ‚ÙÙŠÙ‚ÙØ©',           id_name:'Akikah',                        n:8},
  {id:70,s:3273,ar:'Ø§Ù„Ø°ÙÙ‘Ø¨ÙØ§Ø¦ÙØ­',           id_name:'Sembelihan dan Berburu',        n:43},
  {id:71,s:3316,ar:'Ø§Ù„Ù’Ø£ÙØ¶ÙØ§Ø­ÙÙŠ',           id_name:'Kurban',                        n:18},
  {id:72,s:3334,ar:'Ø§Ù„Ù’Ø£ÙØ´Ù’Ø±ÙØ¨ÙØ©',          id_name:'Minuman',                       n:75},
  {id:73,s:3409,ar:'Ø§Ù„Ù’Ù…ÙØ±Ù’Ø¶ÙÙ‰',            id_name:'Orang Sakit',                   n:22},
  {id:74,s:3431,ar:'Ø§Ù„Ø·ÙÙ‘Ø¨Ù‘',               id_name:'Pengobatan (Thibb)',             n:56},
  {id:75,s:3487,ar:'Ø§Ù„Ù„ÙÙ‘Ø¨ÙØ§Ø³',             id_name:'Pakaian',                       n:93},
  {id:76,s:3580,ar:'Ø§Ù„Ù’Ø£ÙØ¯ÙØ¨',              id_name:'Adab (Etika Islami)',           n:143},
  {id:77,s:3723,ar:'Ø§Ù„ÙØ§Ø³Ù’ØªÙØ¦Ù’Ø°ÙØ§Ù†',        id_name:'Meminta Izin',                  n:65},
  {id:78,s:3788,ar:'Ø§Ù„Ø¯ÙÙ‘Ø¹ÙÙˆÙØ§Øª',           id_name:'Doa',                           n:76},
  {id:79,s:3864,ar:'Ø§Ù„Ø±ÙÙ‘Ù‚ÙØ§Ù‚',             id_name:'Kelembutan Hati (Riqaq)',       n:53},
  {id:80,s:3917,ar:'Ø§Ù„Ù’Ù‚ÙØ¯ÙØ±',              id_name:'Takdir (Qadar)',                 n:16},
  {id:81,s:3933,ar:'Ø§Ù„Ù’Ø£ÙÙŠÙ’Ù…ÙØ§Ù†',           id_name:'Sumpah dan Nadzar',             n:32},
  {id:82,s:3965,ar:'Ø§Ù„Ù’ÙƒÙÙÙÙ‘Ø§Ø±ÙØ§Øª',         id_name:'Kafarat (Tebusan Dosa)',        n:6},
  {id:83,s:3971,ar:'Ø§Ù„Ù’ÙÙØ±ÙØ§Ø¦ÙØ¶',           id_name:'Warisan (Fara\'id)',             n:29},
  {id:84,s:4000,ar:'Ø§Ù„Ù’Ø­ÙØ¯ÙÙˆØ¯',             id_name:'Hudud (Hukuman Had)',           n:46},
  {id:85,s:4046,ar:'Ø§Ù„Ø¯ÙÙ‘ÙŠÙØ§Øª',             id_name:'Diyat',                         n:31},
  {id:86,s:4077,ar:'Ø§Ù„Ù’Ù…ÙØ±Ù’ØªÙØ¯ÙÙ‘ÙŠÙ†',        id_name:'Orang Murtad (Riddah)',         n:5},
  {id:87,s:4082,ar:'Ø§Ù„Ù’Ø¥ÙÙƒÙ’Ø±ÙØ§Ù‡',           id_name:'Paksaan (Ikrah)',               n:7},
  {id:88,s:4089,ar:'Ø§Ù„Ù’Ø­ÙÙŠÙÙ„',              id_name:'Tipu Daya (Hail)',              n:15},
  {id:89,s:4104,ar:'ØªÙØ¹Ù’Ø¨ÙÙŠØ±Ù Ø§Ù„Ø±ÙÙ‘Ø¤Ù’ÙŠÙØ§',  id_name:'Tafsir Mimpi',                 n:50},
  {id:90,s:4154,ar:'Ø§Ù„Ù’ÙÙØªÙÙ†',              id_name:'Fitnah',                        n:25},
  {id:91,s:4179,ar:'Ø§Ù„Ù’Ø£ÙØ­Ù’ÙƒÙØ§Ù…',           id_name:'Hukum-Hukum',                  n:48},
  {id:92,s:4227,ar:'Ø§Ù„Ù’Ø£ÙÙ…ÙØ§Ù†ÙÙŠ',           id_name:'Angan-Angan',                   n:12},
  {id:93,s:4239,ar:'Ø£ÙØ®Ù’Ø¨ÙØ§Ø±Ù Ø§Ù„Ù’Ø¢Ø­ÙØ§Ø¯',   id_name:'Hadis Ahad',                   n:6},
  {id:94,s:4245,ar:'Ø§Ù„ØªÙÙ‘ÙˆÙ’Ø­ÙÙŠØ¯',           id_name:'Keesaan Allah (Tauhid)',        n:57},
  {id:95,s:4302,ar:'Ø§Ù„ÙØ§Ø¹Ù’ØªÙØµÙØ§Ù…',          id_name:'Berpegang pada Al-Qur\'an & Sunnah', n:28},
  {id:96,s:4330,ar:'Ø§Ù„Ù’Ø¹ÙÙ„Ù’Ù… (2)',          id_name:'Ilmu (Tambahan)',               n:13},
  {id:97,s:4343,ar:'Ø§Ù„Ø¯ÙÙ‘ÙŠÙØ§Øª (2)',         id_name:'Kitab Penutup',                 n:10},
];

var API    = 'https://api.hadith.gading.dev';
var PER    = 10;
var aktif  = null;
var curPg  = 1;
var lastData = [];

/* â”€â”€ Build sidebar â”€â”€ */
function buildSidebar(list){
  var el = document.getElementById('sbList');
  if(!list.length){
    el.innerHTML = '<div style="padding:16px;text-align:center;font-family:Tajawal,sans-serif;font-size:.75rem;color:rgba(255,255,255,.3)">Tidak ditemukan</div>';
    return;
  }
  el.innerHTML = list.map(function(k){
    return '<button class="kitab-btn'+(aktif&&aktif.id===k.id?' active':'')+'" id="kb'+k.id+'" onclick="pilihKitab('+k.id+')">'+
      '<div class="kb-num">'+k.id+'</div>'+
      '<div class="kb-text">'+
        '<div class="kb-name">'+k.id_name+'</div>'+
        '<div class="kb-count">'+k.n+' hadis</div>'+
      '</div>'+
    '</button>';
  }).join('');
}
buildSidebar(KITAB);

/* â”€â”€ Search â”€â”€ */
window.cariKitab = function(q){
  q = q.toLowerCase().trim();
  if(!q){ buildSidebar(KITAB); return; }
  buildSidebar(KITAB.filter(function(k){
    return k.id_name.toLowerCase().includes(q) || String(k.id).includes(q) ||
           k.ar.includes(q);
  }));
};

/* â”€â”€ Pilih Kitab â”€â”€ */
window.pilihKitab = function(id){
  aktif = KITAB.find(function(k){ return k.id === id; });
  if(!aktif) return;
  curPg = 1;
  /* Update active state in sidebar */
  document.querySelectorAll('.kitab-btn').forEach(function(b){ b.classList.remove('active'); });
  var btn = document.getElementById('kb'+id);
  if(btn){ btn.classList.add('active'); btn.scrollIntoView({block:'nearest',behavior:'smooth'}); }
  muatHadis();
};

/* â”€â”€ Muat Hadis dari API â”€â”€ */
/* Cache per kitab+halaman */
var CACHE = {};

/* â”€â”€ Ekstrak array hadis dari berbagai kemungkinan struktur respons API â”€â”€ */
function ekstrakHadiths(res){
  if(!res) return [];
  /* Struktur 1: { data: { hadiths: [...] } }  â† range endpoint */
  if(res.data && Array.isArray(res.data.hadiths))  return res.data.hadiths;
  /* Struktur 2: { data: { hadith: [...] } } */
  if(res.data && Array.isArray(res.data.hadith))   return res.data.hadith;
  /* Struktur 3: { data: [...] } */
  if(res.data && Array.isArray(res.data))           return res.data;
  /* Struktur 4: { hadiths: [...] } */
  if(Array.isArray(res.hadiths))                    return res.hadiths;
  /* Struktur 5: { data: { number, arab, id, en } }  â† single hadis, bungkus jadi array */
  if(res.data && typeof res.data === 'object' && !Array.isArray(res.data)){
    var d = res.data;
    /* Pastikan bukan { name:"bukhari", hadiths:[] } yang kosong */
    if(d.arab || d.text_ar || d.arabic){
      return [d];
    }
    /* Kadang single endpoint bungkus hadis di dalam { data: { data: {...} } } */
    if(d.data && (d.data.arab || d.data.text_ar)){
      return [d.data];
    }
  }
  return [];
}

/* â”€â”€ Normalisasi satu objek hadis ke field standar {number,arab,terjemah,chain} â”€â”€ */
function normalHadis(h){
  if(!h) return null;
  var arab   = (h.arab   || h.text_ar  || h.arabic || '').trim();
  /* 'id' di respons bisa berarti book name ("bukhari") BUKAN Indonesia.
     Cek dulu: kalau h.id adalah string pendek (nama kitab) skip, pakai h.indonesia atau h.en */
  var terjemah = '';
  if(h.id && h.id.length > 20){
    /* Kemungkinan besar ini terjemahan Indonesia */
    terjemah = h.id;
  }
  terjemah = terjemah ||
             h.indonesia   || h.terjemah  || h.terjemahan ||
             h.translation || h.text_id   || h.text_idn   ||
             h.en          || h.english   || h.text_en    || '';
  terjemah = terjemah.trim();
  var chain = (h.chain || h.narrator || h.sanad || '').trim();
  var num   = h.number || h.no || h.id_number || 0;
  return {number:num, arab:arab, terjemah:terjemah, chain:chain};
}

function muatHadis(){
  if(!aktif) return;
  var localStart = (curPg-1)*PER + 1;
  var localEnd   = Math.min(curPg*PER, aktif.n);
  var globalStart = aktif.s + localStart - 1;
  var globalEnd   = aktif.s + localEnd   - 1;
  var cacheKey    = aktif.id + '_' + curPg;

  if(CACHE[cacheKey]){
    lastData = CACHE[cacheKey];
    renderHadis(localStart);
    return;
  }

  tampilLoading();

  /* â”€â”€ Strategi 1: range endpoint (lebih efisien, 1 request) â”€â”€ */
  fetch(API + '/books/bukhari?range=' + globalStart + '-' + globalEnd)
    .then(function(r){
      if(!r.ok) throw new Error('HTTP ' + r.status);
      return r.json();
    })
    .then(function(res){
      var raw = ekstrakHadiths(res);
      /* Validasi: pastikan ada konten Arab atau terjemahan (bukan hanya nama kitab) */
      var valid = raw.filter(function(h){
        var n = normalHadis(h);
        return n && (n.arab || n.terjemah);
      });
      if(valid.length > 0){
        var hadiths = valid.map(normalHadis);
        CACHE[cacheKey] = hadiths;
        lastData = hadiths;
        renderHadis(localStart);
      } else {
        /* Respons kosong/tidak valid â†’ coba strategi 2 */
        throw new Error('empty_response');
      }
    })
    .catch(function(){
      /* â”€â”€ Strategi 2: fetch individual per nomor â”€â”€ */
      var promises = [];
      for(var n = localStart; n <= localEnd; n++){
        (function(gNum){
          promises.push(
            fetch(API + '/books/bukhari/' + gNum)
              .then(function(r){ return r.ok ? r.json() : null; })
              .then(function(res){
                if(!res) return null;
                var arr = ekstrakHadiths(res);
                if(arr.length) return normalHadis(arr[0]);
                /* Beberapa API: data langsung berisi hadis object */
                return normalHadis(res.data || res);
              })
              .catch(function(){ return null; })
          );
        })(aktif.s + n - 1);
      }
      Promise.all(promises)
        .then(function(results){
          var hadiths = results.filter(function(h){
            return h && (h.arab || h.terjemah);
          });
          if(hadiths.length){
            CACHE[cacheKey] = hadiths;
            lastData = hadiths;
            renderHadis(localStart);
          } else {
            tampilError(new Error('Tidak ada data dari API. Coba refresh.'));
          }
        })
        .catch(function(e){ tampilError(e); });
    });
}

/* â”€â”€ Render Hadis â”€â”€ */
function renderHadis(startNum){
  var pane = document.getElementById('mainPane');
  var totalPg = Math.ceil(aktif.n / PER);
  var endNum  = Math.min(curPg*PER, aktif.n);

  var html =
    /* Header */
    '<div class="main-head">'+
      '<div class="mh-left">'+
        '<h2>'+aktif.id_name+'</h2>'+
        '<p>Kitab ke-'+aktif.id+' Â· Shahih Al-Bukhari Â· '+aktif.n+' hadis</p>'+
      '</div>'+
      '<div class="mh-right">'+
        '<button class="nav-arrow" onclick="pindahHal('+(curPg-1)+')" '+(curPg<=1?'disabled':'')+'>â€¹</button>'+
        '<span class="page-counter">'+curPg+' / '+totalPg+'</span>'+
        '<button class="nav-arrow" onclick="pindahHal('+(curPg+1)+')" '+(curPg>=totalPg?'disabled':'')+'>â€º</button>'+
      '</div>'+
    '</div>'+
    /* Info bar */
    '<div class="info-bar">'+
      '<div class="ib-item">ğŸ“„ Hadis <strong>'+startNum+'â€“'+endNum+'</strong> dari <strong>'+aktif.n+'</strong></div>'+
      '<div class="ib-item">ğŸ“‹ Halaman <strong>'+curPg+'</strong> dari <strong>'+totalPg+'</strong></div>'+
      '<div class="ib-item">ğŸ“š Shahih Al-Bukhari</div>'+
    '</div>'+
    /* Hadis list */
    '<div class="hadis-scroll" id="hadisScroll">';

  if(!lastData.length){
    html += '<div class="state-view"><div class="state-icon">ğŸ“­</div>'+
      '<div class="state-title">Tidak Ada Data</div>'+
      '<div class="state-body">API tidak mengembalikan hadis untuk rentang ini. Coba halaman lain atau periksa koneksi.</div></div>';
  } else {
    lastData.forEach(function(h, i){
      var num  = (h.number || h.no || (startNum + i));
      var arab = (h.arab || '').trim();
      var trjm = (h.terjemah || '').trim();
      var perawi = (h.chain || '').trim();
      html +=
        '<div class="hadis-card">'+
          '<div class="hc-top">'+
            '<div class="hc-badge">'+
              '<div class="hc-num">'+num+'</div>'+
              '<div class="hc-meta">Kitab <b>'+aktif.id_name+'</b> Â· Hadis No.&nbsp;'+num+'</div>'+
            '</div>'+
            '<div class="hc-actions">'+
              '<button class="hc-action" onclick="salinHadis('+num+',this)" title="Salin terjemahan">ğŸ“‹</button>'+
            '</div>'+
          '</div>'+
          (arab ? '<div class="hc-arab">'+arab+'</div>' : '')+
          '<div class="hc-sep"><div class="hc-sep-line"></div><div class="hc-sep-label">Terjemahan</div><div class="hc-sep-line"></div></div>'+
          '<div class="hc-terjemah">'+(trjm||'<em style="color:var(--inkl);font-style:italic">Terjemahan tidak tersedia untuk hadis ini.</em>')+'</div>'+
          (perawi ? '<div class="hc-perawi">ğŸ“œ Diriwayatkan: '+perawi+'</div>' : '')+
        '</div>';
    });
  }
  html += '</div>'; /* end hadis-scroll */
  html += buildPagination(curPg, totalPg);
  pane.innerHTML = html;
}

/* â”€â”€ Pagination â”€â”€ */
function buildPagination(cur, total){
  if(total <= 1) return '';
  var pages = [];
  if(total <= 7){
    for(var i=1;i<=total;i++) pages.push(i);
  } else {
    pages.push(1);
    if(cur > 3) pages.push('â€¦');
    var lo = Math.max(2,cur-1), hi = Math.min(total-1,cur+1);
    for(var p=lo;p<=hi;p++) pages.push(p);
    if(cur < total-2) pages.push('â€¦');
    pages.push(total);
  }
  var html = '<div class="pagination">'+
    '<button class="pg-btn" onclick="pindahHal(1)" '+(cur<=1?'disabled':'')+'>Â«</button>'+
    '<button class="pg-btn" onclick="pindahHal('+(cur-1)+')" '+(cur<=1?'disabled':'')+'>â€¹</button>';
  pages.forEach(function(p){
    if(p==='â€¦') html += '<button class="pg-btn dots">â€¦</button>';
    else html += '<button class="pg-btn'+(p===cur?' active':'')+'" onclick="pindahHal('+p+')">'+p+'</button>';
  });
  html += '<button class="pg-btn" onclick="pindahHal('+(cur+1)+')" '+(cur>=total?'disabled':'')+'>â€º</button>'+
          '<button class="pg-btn" onclick="pindahHal('+total+')" '+(cur>=total?'disabled':'')+'>Â»</button>'+
          '</div>';
  return html;
}

/* â”€â”€ Pindah Halaman â”€â”€ */
window.pindahHal = function(pg){
  if(!aktif) return;
  var total = Math.ceil(aktif.n / PER);
  if(pg < 1 || pg > total) return;
  curPg = pg;
  muatHadis();
  var sc = document.getElementById('hadisScroll');
  if(sc) sc.scrollTop = 0;
};

/* â”€â”€ States â”€â”€ */
function tampilLoading(){
  document.getElementById('mainPane').innerHTML =
    '<div class="state-view">'+
      '<div class="spinner"></div>'+
      '<div class="state-body">Memuat hadis... <span id="loadCount"></span></div>'+
    '</div>';
}

function tampilError(err){
  document.getElementById('mainPane').innerHTML =
    '<div class="state-view">'+
      '<div class="err-box">'+
        '<p>âš ï¸ <strong>Gagal memuat hadis.</strong><br>'+
        'Periksa koneksi internet Anda, kemudian coba lagi.'+
        (err ? '<code>'+err.message+'</code>' : '')+
        '</p>'+
        '<button class="btn-retry" onclick="muatHadis()">ğŸ”„ Coba Lagi</button>'+
      '</div>'+
      '<div class="api-notice" style="margin-top:12px">'+
        'ğŸ“¡ Halaman ini mengambil data dari <strong>api.hadith.gading.dev</strong>. '+
        'Jika server API sedang tidak tersedia, data tidak dapat dimuat sementara waktu.'+
      '</div>'+
    '</div>';
}

/* â”€â”€ Salin Hadis â”€â”€ */
window.salinHadis = function(num, btn){
  var card = btn.closest('.hadis-card');
  var trjm = card.querySelector('.hc-terjemah');
  if(!trjm) return;
  var teks = '[Shahih Al-Bukhari No. ' + num + ']\n\n' + trjm.innerText + '\n\nâ€” Musholla Baiturrahman';
  if(navigator.clipboard){
    navigator.clipboard.writeText(teks).then(function(){
      btn.textContent = 'âœ…';
      btn.classList.add('copied');
      setTimeout(function(){ btn.textContent = 'ğŸ“‹'; btn.classList.remove('copied'); }, 2200);
    });
  }
};

/* expose for inline onclick */
window.muatHadis = muatHadis;

})();
</script>
</body>
</html>
